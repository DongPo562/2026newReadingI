\## åŠŸèƒ½æ¦‚è¿°



ä¸º EnREAD æ–°å¢"é€‰ä¸­è‹±æ–‡æ–‡æœ¬åæŒ‰é¼ æ ‡ä¸­é”®ï¼Œåœ¨é€‰ä¸­æ–‡æœ¬ç´§é‚»æœ«å°¾æ’å…¥ AI ç”Ÿæˆçš„ emoji"åŠŸèƒ½ã€‚è¯¥åŠŸèƒ½å¸®åŠ©ç”¨æˆ·åœ¨é˜…è¯»è‹±æ–‡æ—¶ï¼Œç”¨ emoji å›¾æ ‡ç›´è§‚æ ‡æ³¨å•è¯æˆ–çŸ­è¯­çš„å«ä¹‰ï¼Œå¢å¼ºè®°å¿†æ•ˆæœã€‚



è§¦å‘æ–¹å¼é»˜è®¤ä¸ºé¼ æ ‡ä¸­é”®ï¼Œå¯åœ¨ config.ini ä¸­åˆ‡æ¢ä¸ºé”®ç›˜å¿«æ·é”®ã€‚å¤§æ¨¡å‹å¤ç”¨ç°æœ‰ ai\_\[service.py](http://service.py) çš„è¯·æ±‚åŸºç¡€è®¾æ–½ï¼Œä½†ç‹¬ç«‹é…ç½®æ¨¡å‹é€‰æ‹©ï¼Œä¸å‡ºé¢˜åŠŸèƒ½äº’ä¸å¹²æ‰°ã€‚



---



\## å·²ç¡®å®šçš„æŠ€æœ¯æ–¹æ¡ˆ



| å†³ç­–é¡¹ | é€‰å®šæ–¹æ¡ˆ |

| --- | --- |

| è§¦å‘æ–¹å¼ | é¼ æ ‡ä¸­é”®ï¼ˆé»˜è®¤ï¼‰ï¼Œconfig.ini å¯é…ç½®åˆ‡æ¢ä¸ºé”®ç›˜å¿«æ·é”® |

| è·å–é€‰ä¸­æ–‡æœ¬ | UIA TextPatternï¼ˆå¤ç”¨ ui\_\[automation.py](http://automation.py) çš„ get\_selected\_textï¼‰ |

| å…‰æ ‡å®šä½ä¸æ’å…¥æ—¶åº | å…ˆè°ƒ API æ‹¿åˆ° emojiï¼Œå†æŒ‰ â†’ é”®å®šä½ + ç²˜è´´ï¼›ç­‰å¾…æœŸé—´é€‰ä¸­è¢«ç ´ååˆ™æ”¾å¼ƒ |

| Prompt è¯­è¨€ | è‹±æ–‡ï¼ˆç¨³å®šæ€§æ›´å¥½ï¼‰ |

| è¾“å‡ºæ ¡éªŒ | æ­£åˆ™æå– emojiï¼Œä¸¢å¼ƒé emoji å†…å®¹ |

| æœåŠ¡é™çº§ | æ’å…¥é€šç”¨å ä½ç¬¦ â“ï¼Œè®©ç”¨æˆ·çŸ¥é“è§¦å‘äº†ä½† AI æœªè¿”å›æœ‰æ•ˆç»“æœ |

| max\_tokens | ä¸é™åˆ¶ï¼Œä¾èµ– prompt çº¦æŸ |

| å‰ªè´´æ¿å¤„ç† | ä¸æ¢å¤å‰ªè´´æ¿ |



---



\## ç¬¬ä¸€æ­¥ï¼šç†è§£ç°æœ‰æ¶æ„ä¸æœ¬æ¬¡æ”¹åŠ¨èŒƒå›´



è¯·å…ˆé˜…è¯»ä»¥ä¸‹æ–‡ä»¶ï¼Œç†è§£é¡¹ç›®ç°æœ‰çš„è§¦å‘å™¨æ¨¡å¼ã€AI æœåŠ¡æ¶æ„å’Œé…ç½®åŠ è½½æ–¹å¼ï¼š



\*\*å¿…è¯»æ–‡ä»¶ï¼š\*\*



\- \[\*\*AGENTS.md\*\*](http://AGENTS.md)ï¼šé¡¹ç›®æ•´ä½“æ¶æ„æ¦‚è§ˆï¼Œäº†è§£å„æ¨¡å—èŒè´£å’Œè§¦å‘å™¨å‘½åè§„èŒƒ

\- \*\*quiz\_\[trigger.py](http://trigger.py)\*\*ï¼šå‚è€ƒå…¶å®Œæ•´çš„è§¦å‘å™¨å®ç°æ¨¡å¼â€”â€”é”®ç›˜ç›‘å¬ã€é˜²æŠ–ã€UIA å–æ–‡æœ¬ã€è°ƒç”¨ AIServiceã€è¶…æ—¶é™çº§ã€çº¿ç¨‹å¤„ç†

\- \*\*ai\_\[service.py](http://service.py)\*\*ï¼šå‚è€ƒå…¶ LLM è¯·æ±‚åŸºç¡€è®¾æ–½â€”â€”MODEL\_REGISTRYã€å¤šæ¨¡å‹çº§è”é‡è¯•ã€\_request\_llmã€generate\_emoji æ–¹æ³•ï¼ˆå·²æœ‰é›å½¢ä½†éœ€æ”¹é€ ï¼‰ã€\_extract\_first\_emojiï¼ˆéœ€æ‰©å±•ä¸ºæ”¯æŒ 1-3 ä¸ª emojiï¼‰

\- \*\*config\_\[loader.py](http://loader.py)\*\*ï¼šå‚è€ƒ QuizTrigger é…ç½®åŒºå—çš„å†™æ³•ï¼Œäº†è§£ EmojiTrigger é…ç½®åŒºå—ï¼ˆå·²å­˜åœ¨ï¼Œéœ€æ ¸å¯¹æ˜¯å¦å®Œæ•´ï¼‰

\- \*\*config.ini\*\*ï¼šå‚è€ƒ \[QuizTrigger] çš„æ³¨é‡Šé£æ ¼ï¼Œäº†è§£ \[EmojiTrigger] åŒºå—ï¼ˆå·²å­˜åœ¨ï¼Œéœ€æ ¸å¯¹æ˜¯å¦å®Œæ•´ï¼‰

\- \*\*ui\_\[automation.py](http://automation.py)\*\*ï¼šäº†è§£ get\_selected\_text() çš„è°ƒç”¨æ–¹å¼å’Œè¿”å›å€¼

\- \*\*text\_\[processor.py](http://processor.py)\*\*ï¼šäº†è§£ clean\_text()ã€is\_valid\_word() ç­‰æ–‡æœ¬æ ¡éªŒå‡½æ•°

\- \[\*\*main.py\*\*](http://main.py)ï¼šäº†è§£é¼ æ ‡ç›‘å¬çš„å…¥å£å’Œç°æœ‰çš„äº‹ä»¶åˆ†å‘æ–¹å¼ï¼Œè¯„ä¼°ä¸­é”®ç›‘å¬åº”æŒ‚è½½çš„ä½ç½®



\*\*æœ¬æ¬¡éœ€è¦æ–°å»ºçš„æ–‡ä»¶ï¼š\*\*



\- \*\*emoji\_\[trigger.py](http://trigger.py)\*\*ï¼šEmoji æ’å…¥è§¦å‘å™¨ä¸»æ¨¡å—ï¼ˆæ–°å»ºï¼‰



\*\*æœ¬æ¬¡éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶ï¼š\*\*



\- \*\*ai\_\[service.py](http://service.py)\*\*ï¼šæ”¹é€  generate\_emoji ç›¸å…³æ–¹æ³•ï¼Œé€‚é… 1-3 ä¸ª emoji çš„éœ€æ±‚å’Œè‹±æ–‡ prompt

\- \*\*config\_\[loader.py](http://loader.py)\*\*ï¼šæ ¸å¯¹ EmojiTrigger é…ç½®å±æ€§æ˜¯å¦å®Œæ•´è¦†ç›–æ‰€æœ‰éœ€æ±‚

\- \*\*config.ini\*\*ï¼šæ ¸å¯¹ \[EmojiTrigger] åŒºå—æ˜¯å¦å®Œæ•´

\- \[\*\*main.py\*\*](http://main.py)ï¼šåœ¨å¯åŠ¨æµç¨‹ä¸­åˆå§‹åŒ–å¹¶å¯åŠ¨ EmojiTriggerListener



---



\## ç¬¬äºŒæ­¥ï¼šè¯¦ç»†åŠŸèƒ½è§„æ ¼



\### 2.1 è§¦å‘ä¸ç›‘å¬



\- æ–°å»º emoji\_\[trigger.py](http://trigger.py)ï¼Œåˆ›å»º EmojiTriggerListener ç±»

\- å‘½åå’Œç»“æ„å‚ç…§ quiz\_\[trigger.py](http://trigger.py) çš„ QuizTriggerListener

\- æ ¹æ® config.ini çš„ trigger\_mode å†³å®šç›‘å¬æ–¹å¼ï¼š

&nbsp;   - \*\*mouse\_middle æ¨¡å¼\*\*ï¼šä½¿ç”¨ pynput çš„é¼ æ ‡ç›‘å¬ï¼Œæ•è· Button.middle çš„ç‚¹å‡»äº‹ä»¶

&nbsp;   - \*\*alt\_backslash æ¨¡å¼\*\*ï¼šä½¿ç”¨ pynput çš„é”®ç›˜ç›‘å¬ï¼Œæ•è· Alt + \\ ç»„åˆé”®

\- è§¦å‘åçš„å¤„ç†é€»è¾‘åœ¨ç‹¬ç«‹çš„ daemon çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œä¸é˜»å¡ç›‘å¬å¾ªç¯

\- é˜²æŠ–é—´éš” 500msï¼ˆä» config è¯»å– debounce\_intervalï¼‰ï¼Œé€»è¾‘ä¸ quiz\_\[trigger.py](http://trigger.py) ä¸€è‡´ï¼šè®°å½• last\_trigger\_timeï¼Œé—´éš”å†…çš„é‡å¤è§¦å‘ç›´æ¥ä¸¢å¼ƒå¹¶æ‰“å° Debounced æ—¥å¿—



\### 2.2 æ–‡æœ¬è·å–ä¸æ ¡éªŒ



è§¦å‘åæŒ‰ä»¥ä¸‹é¡ºåºå¤„ç†ï¼š



1\. sleep(trigger\_delay) å®‰å…¨ä½™é‡ï¼ˆé»˜è®¤ 0.02 ç§’ï¼Œä» config è¯»å–ï¼‰

2\. è°ƒç”¨ ui\_\[automation.py](http://automation.py) çš„ get\_selected\_text() è·å–é€‰ä¸­æ–‡æœ¬

3\. æ ¡éªŒè§„åˆ™ï¼ˆä»»ä½•ä¸€æ¡ä¸é€šè¿‡åˆ™é™é»˜æ”¾å¼ƒï¼Œæ‰“å°æ—¥å¿—è¯´æ˜åŸå› ï¼‰ï¼š

&nbsp;   - æ–‡æœ¬ä¸ä¸ºç©ºä¸” strip åä¸ä¸ºç©º

&nbsp;   - å»æ‰æ¢è¡Œç¬¦å¹¶ strip é¦–å°¾ç©ºæ ¼åï¼Œé•¿åº¦ä¸è¶…è¿‡ max\_input\_charsï¼ˆé»˜è®¤ 60ï¼Œä» config è¯»å–ï¼‰

&nbsp;   - ä¸åŒ…å«éè‹±æ–‡å­—ç¬¦ï¼ˆä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ç­‰ï¼‰ã€‚åˆ¤æ–­æ–¹æ³•ï¼šéå†æ¯ä¸ªå­—ç¬¦ï¼Œå¦‚æœå­˜åœ¨ Unicode èŒƒå›´åœ¨ CJK ç»Ÿä¸€æ±‰å­—ï¼ˆU+4E00-U+9FFFï¼‰ã€æ—¥æ–‡å¹³å‡åç‰‡å‡åï¼ˆU+3040-U+30FFï¼‰ã€éŸ©æ–‡ï¼ˆU+AC00-U+D7AFï¼‰ç­‰åŒºé—´çš„å­—ç¬¦ï¼Œåˆ™æ”¾å¼ƒè§¦å‘ã€‚è‹±æ–‡å­—æ¯ã€æ•°å­—ã€å¸¸è§æ ‡ç‚¹ã€ç©ºæ ¼å‡è§†ä¸ºåˆæ³•

4\. å°†æ¸…æ´—åçš„æ–‡æœ¬ï¼ˆå»æ¢è¡Œ + stripï¼‰ä½œä¸º cleaned\_text ä¼ ç»™ AI æœåŠ¡



\### 2.3 AI è¯·æ±‚ä¸ Emoji ç”Ÿæˆ



\- å¤ç”¨ ai\_\[service.py](http://service.py) çš„ AIService ç±»ï¼Œä½† EmojiTriggerListener åœ¨åˆå§‹åŒ–æ—¶åˆ›å»ºè‡ªå·±çš„ AIService å®ä¾‹ï¼Œä¼ å…¥ emoji ä¸“å±çš„ model\_idã€enable\_reasoningã€api\_timeoutï¼ˆå‡ä» config çš„ EmojiTrigger åŒºå—è¯»å–ï¼‰

\- è°ƒç”¨æ–¹å¼ï¼šfuture = \[self.ai](http://self.ai)\_service.generate\_emoji(cleaned\_text)ï¼Œç„¶å future.result(timeout=api\_timeout + 0.5)



\*\*æ”¹é€  ai\_\[service.py](http://service.py) ä¸­çš„ emoji ç›¸å…³æ–¹æ³•ï¼š\*\*



\- \*\*\_build\_emoji\_prompt(self, content)\*\*ï¼šæ›¿æ¢ä¸ºè‹±æ–‡ promptï¼Œå†…å®¹å¦‚ä¸‹ï¼š

&nbsp;   - "What emoji(s) best represent the meaning of "{content}"? Reply with 1 to 3 emojis only, nothing else."

\- \*\*\_extract\_first\_emoji(self, text)\*\*ï¼šé‡å‘½åä¸º \*\*\_extract\_emojis(self, text)\*\*ï¼Œæ”¹é€ ä¸ºæå– 1-3 ä¸ª emojiï¼š

&nbsp;   - ç”¨æ­£åˆ™åŒ¹é…æ‰€æœ‰ Unicode emoji å­—ç¬¦ï¼ˆè¦†ç›– U+1F300-U+1FAFFã€U+2600-U+27BFã€U+FE00-U+FE0Fã€U+200D ç­‰ç»„åˆ emoji èŒƒå›´ï¼‰

&nbsp;   - å–å‰ 3 ä¸ª emojiï¼Œæ‹¼æ¥ä¸ºå­—ç¬¦ä¸²è¿”å›

&nbsp;   - å¦‚æœä¸€ä¸ª emoji éƒ½æ²¡æå–åˆ°ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²

\- \*\*\_generate\_emoji\_worker(self, content)\*\*ï¼šæ”¹é€ æµç¨‹ï¼š

&nbsp;   - è°ƒç”¨ \_request\_llm æ‹¿åˆ° raw æ–‡æœ¬

&nbsp;   - è°ƒç”¨ \_extract\_emojis æå– emoji å­—ç¬¦ä¸²

&nbsp;   - å¦‚æœæå–ç»“æœéç©ºï¼Œè¿”å›è¯¥å­—ç¬¦ä¸²

&nbsp;   - å¦‚æœæå–ç»“æœä¸ºç©ºï¼Œraise RuntimeErrorï¼ˆä¸Šå±‚ä¼šæ•è·å¹¶é™çº§ï¼‰



\### 2.4 æ’å…¥æ—¶åºï¼ˆæ ¸å¿ƒæµç¨‹ï¼‰



è¿™æ˜¯æ•´ä¸ªåŠŸèƒ½æœ€å…³é”®çš„éƒ¨åˆ†ï¼Œå¿…é¡»ä¸¥æ ¼æŒ‰ä»¥ä¸‹æ—¶åºæ‰§è¡Œï¼š



1\. \*\*è§¦å‘æ—¶\*\*ï¼šç”¨æˆ·é€‰ä¸­æ–‡æœ¬ï¼ˆè“è‰²é«˜äº®çŠ¶æ€ï¼‰ï¼ŒæŒ‰ä¸‹é¼ æ ‡ä¸­é”®

2\. \*\*å…ˆè°ƒ API\*\*ï¼šä¸åšä»»ä½•é”®ç›˜æ¨¡æ‹Ÿæ“ä½œï¼Œä¿æŒé€‰ä¸­çŠ¶æ€ä¸å˜ï¼Œç›´æ¥å‘èµ· AI è¯·æ±‚å¹¶ç­‰å¾…ç»“æœ

3\. \*\*API è¿”å›å\*\*ï¼š

&nbsp;   - æ‹¿åˆ° emoji å­—ç¬¦ä¸²åï¼Œå†æ¬¡è°ƒç”¨ get\_selected\_text() æ£€æŸ¥é€‰ä¸­çŠ¶æ€æ˜¯å¦ä»ç„¶å­˜åœ¨

&nbsp;   - å¦‚æœé€‰ä¸­æ–‡æœ¬ä¸ä¹‹å‰ä¸€è‡´ï¼ˆæˆ–è‡³å°‘ä¸ä¸ºç©ºï¼‰ï¼Œè¯´æ˜ç”¨æˆ·æ²¡æœ‰æ“ä½œè¿‡ï¼Œå¯ä»¥ç»§ç»­æ’å…¥

&nbsp;   - å¦‚æœé€‰ä¸­æ–‡æœ¬ä¸ºç©ºæˆ–å·²å˜åŒ–ï¼Œè¯´æ˜ç”¨æˆ·åœ¨ç­‰å¾…æœŸé—´åšäº†å…¶ä»–æ“ä½œï¼Œ\*\*æ”¾å¼ƒæ’å…¥\*\*ï¼Œæ‰“å°æ—¥å¿—

4\. \*\*æ‰§è¡Œæ’å…¥\*\*ï¼š

&nbsp;   - æ¨¡æ‹ŸæŒ‰ä¸€æ¬¡é”®ç›˜ â†’ æ–¹å‘é”®ï¼ˆRight Arrowï¼‰ï¼Œå–æ¶ˆé€‰ä¸­å¹¶å°†å…‰æ ‡å®šä½åˆ°é€‰ä¸­æ–‡æœ¬çš„ç´§é‚»æœ«å°¾

&nbsp;   - çŸ­æš‚ sleepï¼ˆçº¦ 0.05 ç§’ï¼‰ï¼Œç­‰å¾…å…‰æ ‡å®šä½å®Œæˆ

&nbsp;   - å°† emoji å­—ç¬¦ä¸²å†™å…¥å‰ªè´´æ¿ï¼ˆpyperclip.copyï¼‰

&nbsp;   - æ¨¡æ‹Ÿ Ctrl+V ç²˜è´´

&nbsp;   - ä¸æ¢å¤å‰ªè´´æ¿å†…å®¹



\### 2.5 æœåŠ¡é™çº§



å½“ä»¥ä¸‹ä»»ä½•æƒ…å†µå‘ç”Ÿæ—¶ï¼Œæ‰§è¡Œé™çº§é€»è¾‘ï¼š



\- API è¯·æ±‚è¶…æ—¶ï¼ˆFutureTimeoutErrorï¼‰

\- API è¯·æ±‚å¼‚å¸¸ï¼ˆç½‘ç»œé”™è¯¯ã€HTTP é”™è¯¯ç­‰ï¼‰

\- AI è¿”å›å†…å®¹æ— æ³•æå–å‡ºä»»ä½• emojiï¼ˆæ­£åˆ™åŒ¹é…ä¸ºç©ºï¼‰



\*\*é™çº§è¡Œä¸º\*\*ï¼šå°† config ä¸­çš„ fallback\_emojiï¼ˆé»˜è®¤ â“ï¼‰ä½œä¸ºæ’å…¥å†…å®¹ï¼Œèµ°å’Œæ­£å¸¸æ’å…¥ç›¸åŒçš„æµç¨‹ï¼ˆæ£€æŸ¥é€‰ä¸­çŠ¶æ€ â†’ â†’ é”® â†’ ç²˜è´´ï¼‰ã€‚è¿™æ ·ç”¨æˆ·èƒ½çœ‹åˆ° â“ å‡ºç°åœ¨æ–‡æœ¬æœ«å°¾ï¼ŒçŸ¥é“è§¦å‘æˆåŠŸäº†ä½† AI æ²¡ç»™å‡ºæœ‰æ•ˆç»“æœã€‚



\### 2.6 æ—¥å¿—è§„èŒƒ



å‚ç…§ quiz\_\[trigger.py](http://trigger.py) çš„æ—¥å¿—é£æ ¼ï¼Œæ‰€æœ‰æ—¥å¿—ä½¿ç”¨ \[EmojiTrigger] å‰ç¼€ï¼š



\- å¯åŠ¨ï¼š\[EmojiTrigger] Initialized (enabled=True, mode=mouse\_middle, debounce=0.5s)

\- è§¦å‘ï¼š\[EmojiTrigger] Middle click detected

\- é˜²æŠ–ï¼š\[EmojiTrigger] Debounced duplicate trigger

\- æ–‡æœ¬è·å–ï¼š\[EmojiTrigger] Selected text: 'hello world'

\- æ ¡éªŒå¤±è´¥ï¼š\[EmojiTrigger] Empty selection, skipping / \[EmojiTrigger] Contains non-English chars, skipping / \[EmojiTrigger] Text too long (75 > 60), skipping

\- AI è¯·æ±‚ï¼šç”± ai\_\[service.py](http://service.py) å†…éƒ¨æ‰“å°

\- æ’å…¥æˆåŠŸï¼š\[EmojiTrigger] Inserted emoji 'ğŸŒ' after 'hello world'

\- é€‰ä¸­ä¸¢å¤±ï¼š\[EmojiTrigger] Selection changed during API wait, aborting insert

\- é™çº§ï¼š\[EmojiTrigger] API failed, inserting fallback emoji 'â“'

\- åœæ­¢ï¼š\[EmojiTrigger] Listener stopped



---



\## ç¬¬ä¸‰æ­¥ï¼šé›†æˆä¸å¯åŠ¨



\### 3.1 \[main.py](http://main.py) é›†æˆ



åœ¨ \[main.py](http://main.py) çš„å¯åŠ¨æµç¨‹ä¸­ï¼Œå‚ç…§ QuizTriggerListener çš„åˆå§‹åŒ–å’Œå¯åŠ¨æ–¹å¼ï¼š



1\. åœ¨æ–‡ä»¶é¡¶éƒ¨å¯¼å…¥ï¼šfrom emoji\_trigger import EmojiTriggerListener

2\. åœ¨ MainApp çš„ \_\_init\_\_ æˆ–å¯åŠ¨æ–¹æ³•ä¸­ï¼Œåˆ›å»º EmojiTriggerListener å®ä¾‹å¹¶è°ƒç”¨ start()

3\. åœ¨é€€å‡ºæ¸…ç†é€»è¾‘ä¸­è°ƒç”¨ stop()



\### 3.2 config.ini æ ¸å¯¹æ¸…å•



ç¡®è®¤ \[EmojiTrigger] åŒºå—åŒ…å«ä»¥ä¸‹æ‰€æœ‰é…ç½®é¡¹ï¼ˆå½“å‰ config.ini ä¸­å·²æœ‰è¯¥åŒºå—ï¼Œé€é¡¹æ ¸å¯¹ï¼‰ï¼š



\- enabled = true

\- trigger\_mode = mouse\_middleï¼ˆå¯é€‰å€¼ï¼šmouse\_middle / alt\_backslashï¼‰

\- trigger\_key = \\ï¼ˆä»… alt\_backslash æ¨¡å¼ç”Ÿæ•ˆï¼‰

\- trigger\_delay = 0.02

\- debounce\_interval = 0.5

\- api\_timeout = 8

\- fallback\_emoji = â“

\- max\_input\_chars = 60

\- model\_id = 5

\- enable\_reasoning = false



\### 3.3 config\_\[loader.py](http://loader.py) æ ¸å¯¹æ¸…å•



ç¡®è®¤ Config ç±»ä¸­ EmojiTrigger åŒºå—çš„æ‰€æœ‰ @property æ–¹æ³•å·²å­˜åœ¨ä¸”ä¸ config.ini çš„é”®åä¸€ä¸€å¯¹åº”ï¼ˆå½“å‰ config\_\[loader.py](http://loader.py) ä¸­å·²æœ‰è¯¥åŒºå—ï¼Œé€é¡¹æ ¸å¯¹å³å¯ï¼‰ã€‚



\### 3.4 \[AGENTS.md](http://AGENTS.md) æ›´æ–°



åœ¨ \[AGENTS.md](http://AGENTS.md) ä¸­è¡¥å…… emoji\_\[trigger.py](http://trigger.py) çš„ä¸€è¡Œæ¦‚è¿°ï¼Œæ ¼å¼å‚ç…§å…¶ä»–è§¦å‘å™¨ï¼š



emoji\_\[trigger.py](http://trigger.py) â€” é¼ æ ‡ä¸­é”®ï¼ˆæˆ– Alt+\\ï¼‰â†’ UIA å–é€‰ä¸­æ–‡æœ¬ â†’ æ ¡éªŒè‹±æ–‡ + é•¿åº¦ â†’ AIService ç”Ÿæˆ emoji â†’ æ£€æŸ¥é€‰ä¸­çŠ¶æ€ â†’ â†’ é”®å®šä½ + ç²˜è´´æ’å…¥ï¼›é™çº§æ’å…¥ â“



---



\## æ³¨æ„äº‹é¡¹



1\. \*\*ä¸è¦ä¿®æ”¹ quiz\_\[trigger.py](http://trigger.py)\*\*ï¼Œemoji åŠŸèƒ½æ˜¯ç‹¬ç«‹çš„æ–°è§¦å‘å™¨

2\. \*\*ai\_\[service.py](http://service.py) çš„æ”¹åŠ¨èŒƒå›´\*\*ä»…é™ \_build\_emoji\_promptã€\_extract\_first\_emojiï¼ˆé‡å‘½åä¸º \_extract\_emojisï¼‰ã€\_generate\_emoji\_worker ä¸‰ä¸ªæ–¹æ³•ã€‚å…¶ä»–å‡ºé¢˜å’Œæ‰¹æ”¹ç›¸å…³æ–¹æ³•ä¸è¦åŠ¨

3\. \*\*pynput é¼ æ ‡ç›‘å¬\*\*ï¼šå¦‚æœ \[main.py](http://main.py) ä¸­å·²æœ‰å…¨å±€é¼ æ ‡ç›‘å¬å™¨ï¼Œéœ€è¦è¯„ä¼°æ˜¯åœ¨ç°æœ‰ç›‘å¬å™¨ä¸­æ·»åŠ ä¸­é”®åˆ†æ”¯ï¼Œè¿˜æ˜¯æ–°å»ºç‹¬ç«‹ç›‘å¬å™¨ã€‚ä¼˜å…ˆåœ¨ç°æœ‰ç›‘å¬å™¨ä¸­æ·»åŠ åˆ†æ”¯ä»¥é¿å…å¤šç›‘å¬å™¨å†²çªï¼Œä½†å¦‚æœç‹¬ç«‹ç›‘å¬å™¨æ›´å¹²å‡€åˆ™æ–°å»º

4\. \*\*é”®ç›˜æ¨¡æ‹Ÿæ³¨æ„äº‹é¡¹\*\*ï¼šæ¨¡æ‹Ÿ â†’ é”®å’Œ Ctrl+V æ—¶ï¼Œä½¿ç”¨ pynput.keyboard.Controllerï¼Œæ³¨æ„é‡Šæ”¾æ‰€æœ‰ä¿®é¥°é”®åå†æ“ä½œï¼Œé¿å…å’Œç”¨æˆ·æ­£åœ¨æŒ‰ä½çš„é”®å†²çª

5\. \*\*emoji æ­£åˆ™è¦å¥å£®\*\*ï¼šç°ä»£ emoji åŒ…æ‹¬ç»„åˆåºåˆ—ï¼ˆZWJ åºåˆ—å¦‚ ğŸ‘¨â€ğŸ’»ï¼‰ã€è‚¤è‰²ä¿®é¥°ç¬¦ã€å›½æ——åºåˆ—ç­‰ï¼Œæ­£åˆ™éœ€è¦è¦†ç›–è¿™äº›æƒ…å†µï¼Œå»ºè®®å‚è€ƒç¬¬ä¸‰æ–¹ emoji æ­£åˆ™æ¨¡å¼æˆ–ä½¿ç”¨ Python çš„ emoji åº“è¾…åŠ©åˆ¤æ–­

